@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

/* =====================================================================
   WEB APP STARTER — Global Styles
   Basado en la arquitectura de stockli/vyyq
   Mobile-first | Offline-first | PWA
   ===================================================================== */

/* ─── CSS Custom Properties ──────────────────────────────────────────── */
:root {
  /* Typography */
  --font-size-2xs: 0.6875rem;
  --font-size-xs:  0.8125rem;
  --font-size-sm:  0.875rem;
  --font-size-base: 1rem;
  --font-size-lg:  1.125rem;
  --font-size-xl:  1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;

  /* Line heights */
  --line-height-tight:   1.25;
  --line-height-snug:    1.375;
  --line-height-normal:  1.5;
  --line-height-relaxed: 1.625;

  /* Spacing */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;

  /* Layout */
  --sidebar-width:       300px;
  --sidebar-width-icon:  60px;
  --navbar-height:       72px;
  --bottom-nav-height:   64px;
  --radius:              8px;

  /* Z-index scale */
  --z-dropdown:  100;
  --z-sticky:    200;
  --z-overlay:   300;
  --z-modal:     400;
  --z-toast:     500;
  --z-splash:    9999;

  /* Colors – Light mode (paleta naranja-rojo como stockli) */
  --background:          oklch(1 0 0);
  --foreground:          oklch(0.28 0.04 254);
  --card:                oklch(1 0 0);
  --card-foreground:     oklch(0.29 0.04 254);
  --popover:             oklch(1 0 0);
  --popover-foreground:  oklch(0.29 0.04 254);
  --primary:             oklch(0.63 0.2 29);
  --primary-foreground:  oklch(1 0 0);
  --secondary:           oklch(0.98 0.01 254);
  --secondary-foreground: oklch(0.29 0.04 254);
  --muted:               oklch(0.96 0.01 254);
  --muted-foreground:    oklch(0.46 0.02 254);
  --accent:              oklch(0.96 0.01 254);
  --accent-foreground:   oklch(0.29 0.04 254);
  --destructive:         oklch(0.63 0.26 29);
  --destructive-foreground: oklch(1 0 0);
  --border:              oklch(0.92 0.01 254);
  --input:               oklch(0.92 0.01 254);
  --ring:                oklch(0.63 0.2 29);

  /* Sidebar */
  --sidebar:                    oklch(0.98 0 0);
  --sidebar-foreground:         oklch(0.33 0 0);
  --sidebar-primary:            oklch(0.63 0.21 29);
  --sidebar-primary-foreground: oklch(0.98 0 0);
  --sidebar-accent:             oklch(0.96 0 0);
  --sidebar-accent-foreground:  oklch(0.15 0 0);
  --sidebar-border:             oklch(0.92 0.01 254);
  --sidebar-ring:               oklch(0.63 0.21 29);

  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow:    0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}

/* Dark mode */
.dark {
  --background:          #1f1f1f;
  --foreground:          oklch(0.95 0.01 254);
  --card:                #1f1f1f;
  --card-foreground:     oklch(0.95 0.01 254);
  --popover:             #1f1f1f;
  --popover-foreground:  oklch(0.95 0.01 254);
  --primary:             oklch(0.74 0.15 12);
  --primary-foreground:  oklch(0.24 0 0);
  --secondary:           oklch(0.37 0 0);
  --secondary-foreground: oklch(0.95 0.01 254);
  --muted:               oklch(0.37 0 0);
  --muted-foreground:    oklch(0.72 0 0);
  --accent:              oklch(0.37 0 0);
  --accent-foreground:   oklch(0.95 0.01 254);
  --destructive:         oklch(0.63 0.26 29);
  --destructive-foreground: oklch(0.95 0.01 254);
  --border:              oklch(0.42 0 0);
  --input:               oklch(0.37 0 0);
  --ring:                oklch(0.74 0.15 12);

  --sidebar:                    #2e2e2e;
  --sidebar-foreground:         oklch(0.96 0 0);
  --sidebar-primary:            oklch(0.74 0.15 12);
  --sidebar-primary-foreground: oklch(0.15 0 0);
  --sidebar-accent:             #363636;
  --sidebar-accent-foreground:  oklch(0.96 0 0);
  --sidebar-border:             #363636;
  --sidebar-ring:               var(--ring);
}

/* ─── Reset ──────────────────────────────────────────────────────────── */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ─── HTML / Body – PWA mobile-first ────────────────────────────────── */
html {
  /* Previene zoom de fuente en orientación landscape (iOS) */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;

  /* Permite single-tap, deshabilita double-tap zoom */
  touch-action: manipulation;

  scroll-behavior: smooth;
  height: 100%;
  overscroll-behavior: none;
}

body {
  background-color: var(--background);
  color: var(--foreground);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  min-height: 100%;
  min-height: 100dvh;

  /* ── Selección de texto desactivada (comportamiento app nativa) ── */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;

  /* Deshabilita callout de iOS (copy/paste en long-press) */
  -webkit-touch-callout: none;

  /* Elimina flash de tap en Android */
  -webkit-tap-highlight-color: transparent;

  /* Deshabilita double-tap zoom */
  touch-action: manipulation;

  /* Sin bounce en iOS */
  overscroll-behavior: none;

  /* Safe areas – notch / home bar */
  padding-top:    env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left:   env(safe-area-inset-left);
  padding-right:  env(safe-area-inset-right);
}

/* ─── Selección habilitada en inputs y texto seleccionable ───────────── */
input,
textarea,
[contenteditable="true"],
.selectable-text {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
  -webkit-touch-callout: default;
}

/* ─── Font-size 16px en inputs – previene zoom automático en iOS ──────── */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
input[type="search"],
input[type="date"],
input[type="time"],
input[type="datetime-local"],
textarea,
select {
  font-size: 16px !important;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* ─── Scrollbar ──────────────────────────────────────────────────────── */
::-webkit-scrollbar       { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 9999px;
}
::-webkit-scrollbar-thumb:hover { background: var(--muted-foreground); }

/* ─── Focus ──────────────────────────────────────────────────────────── */
:focus-visible {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}
:focus:not(:focus-visible) { outline: none; }

/* ─── Base elements ──────────────────────────────────────────────────── */
img, video { max-width: 100%; height: auto; display: block; }
h1, h2, h3, h4, h5, h6 { font-weight: 600; line-height: var(--line-height-tight); }
a { color: var(--primary); text-decoration: none; -webkit-tap-highlight-color: transparent; }
a:hover { text-decoration: underline; }
button {
  cursor: pointer;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  -webkit-user-select: none;
}

/* ─── Animations ─────────────────────────────────────────────────────── */
@keyframes fadeIn     { from { opacity: 0 } to { opacity: 1 } }
@keyframes fadeOut    { from { opacity: 1 } to { opacity: 0 } }
@keyframes fadeInUp   { from { opacity: 0; transform: translateY(16px) } to { opacity: 1; transform: translateY(0) } }
@keyframes scaleIn    { from { opacity: 0; transform: scale(0.92) } to { opacity: 1; transform: scale(1) } }
@keyframes slideUp    { from { transform: translateY(100%); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
@keyframes float      { 0%, 100% { transform: translateY(0) } 50% { transform: translateY(-8px) } }
@keyframes spin       { to { transform: rotate(360deg) } }
@keyframes pulse      { 0%, 100% { opacity: 1 } 50% { opacity: 0.5 } }
@keyframes shimmer    { 0% { background-position: 200% 0 } 100% { background-position: -200% 0 } }
@keyframes bounce-slow {
  0%, 100% { transform: translateY(0); animation-timing-function: cubic-bezier(0.8,0,1,1) }
  50%       { transform: translateY(-12px); animation-timing-function: cubic-bezier(0,0,0.2,1) }
}
@keyframes fabBounce  { 0%,100% { transform: scale(1) } 50% { transform: scale(1.15) } }
@keyframes ripple     { 0% { transform: scale(0); opacity: 0.5 } 100% { transform: scale(2.5); opacity: 0 } }
@keyframes header-shadow {
  from { box-shadow: none }
  to   { box-shadow: 0 1px 8px rgba(0,0,0,0.08) }
}

/* ─── Utility classes ────────────────────────────────────────────────── */
.animate-fade-in      { animation: fadeIn 0.2s ease-in-out; }
.animate-fade-in-up   { animation: fadeInUp 0.3s ease-out both; }
.animate-scale-in     { animation: scaleIn 0.2s ease-out both; }
.animate-float        { animation: float 3s ease-in-out infinite; }
.animate-spin         { animation: spin 1s linear infinite; }
.animate-pulse        { animation: pulse 2s ease-in-out infinite; }
.animate-bounce-slow  { animation: bounce-slow 2s infinite; }
.animate-fab-bounce   { animation: fabBounce 0.3s ease-out; }
.animate-slide-up     { animation: slideUp 0.25s ease-out; }
.animate-fade-out     { animation: fadeOut 0.2s ease-in-out; }

/* Tap targets WCAG 44×44 */
.tap-target {
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Safe area helpers */
.safe-top    { padding-top:    env(safe-area-inset-top); }
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
.safe-left   { padding-left:   env(safe-area-inset-left); }
.safe-right  { padding-right:  env(safe-area-inset-right); }

/* Scroll con momentum (iOS) */
.scroll-momentum {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

/* Body lock cuando hay modal */
.no-scroll {
  overflow: hidden;
  position: fixed;
  width: 100%;
}

/* Ripple en nav buttons */
.nav-button { position: relative; overflow: hidden; user-select: none; }
.nav-button-press:active { transform: scale(0.92); transition: transform 0.1s ease; }
.ripple-effect {
  position: absolute;
  border-radius: 50%;
  background: color-mix(in oklch, var(--primary) 25%, transparent);
  transform: scale(0);
  animation: ripple 0.6s linear;
  pointer-events: none;
}

/* ─── FAB – scroll-aware ─────────────────────────────────────────────── */
.fab-scroll-aware { transition: opacity 0.2s ease, transform 0.2s ease; }
@media (max-width: 768px) {
  html[data-fab-state="hidden"] .fab-scroll-aware {
    opacity: 0;
    transform: scale(0.5);
    pointer-events: none;
  }
  html[data-fab-state="shown"] .fab-scroll-aware {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
  }
}

/* ─── Sidebar ────────────────────────────────────────────────────────── */
[data-sidebar="sidebar"] { --sidebar-width: 300px; }

/* ─── Skeleton ───────────────────────────────────────────────────────── */
.skeleton {
  background: linear-gradient(90deg, var(--muted) 25%, var(--border) 50%, var(--muted) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius);
}

/* ─── Header shadow on scroll ────────────────────────────────────────── */
.header-shadow-animation {
  animation: header-shadow linear both;
  animation-timeline: scroll();
  animation-range: 0 50px;
}

/* ─── Empty state ────────────────────────────────────────────────────── */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: 4rem 1.5rem;
  text-align: center;
  color: var(--muted-foreground);
}
.empty-state-icon { animation: float 3s ease-in-out infinite; opacity: 0.6; }
